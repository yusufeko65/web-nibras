(window.webpackJsonp=window.webpackJsonp||[]).push([[25],{"2xdY":function(t,o,i){"use strict";var s=i("F/us"),e=i("0h2I"),n=i("SQrT"),r=i("RN+F"),a=i("czxF"),h=i("o0Bx");function c(){a.call(this),this.onConfirm=null,this.password=e.observable(""),this.inPropgress=e.observable(!1),this.action=""}s.extendOwn(c.prototype,a.prototype),c.prototype.PopupTemplate="TwoFactorAuth_ConfirmPasswordPopup",c.prototype.onOpen=function(t,o){this.onConfirm=t,this.action=o},c.prototype.verifyPassword=function(){this.inPropgress(!0),h.send("TwoFactorAuth",this.action,{Password:this.password()},this.onGetVerifyResponse,this)},c.prototype.onGetVerifyResponse=function(t){t.Result?(s.isFunction(this.onConfirm)&&this.onConfirm(t),this.closePopup(),this.password("")):n.showError(r.i18n("TWOFACTORAUTH/ERROR_WRONG_PASSWORD")),this.inPropgress(!1)},t.exports=new c},"7Lti":function(t,o,i){"use strict";var s=i("0h2I"),e=i("F/us"),n=i("AFLV");t.exports={ServerModuleName:"TwoFactorAuth",HashModuleName:"two-factor-auth",EnableTwoFactorAuth:s.observable(!0),init:function(t){var o=e.extend({},t[this.ServerModuleName]||{},t.TwoFactorAuth||{});e.isEmpty(o)||this.EnableTwoFactorAuth(n.pBool(o.EnableTwoFactorAuth,this.EnableTwoFactorAuth()))}}},PMya:function(t,o,i){"use strict";var s=i("F/us"),e=i("0h2I"),n=i("SQrT"),r=i("RN+F"),a=i("OgeD").run("SettingsWebclient","getAbstractSettingsFormViewClass"),h=i("7Lti"),c=i("76Kh"),p=i("2xdY"),u=i("o0Bx");function l(){a.call(this,h.ServerModuleName),this.isEnabledTwoFactorAuth=e.observable(h.EnableTwoFactorAuth()),this.isPasswordVerified=e.observable(!1),this.isShowSecret=e.observable(!1),this.isValidatingPin=e.observable(!1),this.QRCodeSrc=e.observable(""),this.secret=e.observable(""),this.pin=e.observable("")}s.extendOwn(l.prototype,a.prototype),l.prototype.ViewTemplate="TwoFactorAuth_TwoFactorAuthSettingsFormView",l.prototype.confirmePassword=function(){c.showPopup(p,[s.bind(this.onConfirmePassword,this),"EnableTwoFactorAuth"])},l.prototype.onConfirmePassword=function(t){t&&t.Result&&t.Result.Secret&&t.Result.QRcode&&(this.QRCodeSrc(t.Result.QRcode),this.secret(t.Result.Secret),this.isShowSecret(!0))},l.prototype.validatePin=function(){this.isValidatingPin(!0),u.send("TwoFactorAuth","TwoFactorAuthSave",{Pin:this.pin(),Secret:this.secret()},this.onValidatingPinResponse,this)},l.prototype.onValidatingPinResponse=function(t){this.isValidatingPin(!1),t&&t.Result?(this.QRCodeSrc(""),this.secret(""),this.pin(""),this.isShowSecret(!1),this.isEnabledTwoFactorAuth(!0)):n.showError(r.i18n("TWOFACTORAUTH/ERROR_WRONG_PIN"))},l.prototype.disable=function(){c.showPopup(p,[s.bind((function(){this.QRCodeSrc(""),this.secret(""),this.pin(""),this.isShowSecret(!1),this.isEnabledTwoFactorAuth(!1)}),this),"DisableTwoFactorAuth"])},t.exports=new l},Rr39:function(t,o,i){"use strict";var s=i("F/us"),e=i("IAk5"),n=i("RN+F"),r=i("7Lti");t.exports=function(t){return r.init(t),{start:function(t){t.run("SettingsWebclient","registerSettingsTab",[function(){return i("PMya")},r.HashModuleName,n.i18n("TWOFACTORAUTH/LABEL_SETTINGS_TAB")]);var o=function(t){var o=t.View,e=i("76Kh"),n=i("YI4A");if(o){var r=o.onSystemLoginResponse.bind(o);s.isFunction(r)||(r=o.onSystemLoginResponseBase.bind(o)),s.isFunction(r)||(r=function(){}),o.onSystemLoginResponse=function(t,o){null!=o.Parameters.Domain&&(o.Parameters.Login=o.Parameters.Login+"@"+o.Parameters.Domain),t.Result&&t.Result.TwoFactorAuth?e.showPopup(n,[s.bind(this.onSystemLoginResponseBase,this),s.bind((function(){this.loading(!1)}),this),o.Parameters.Login,o.Parameters.Password]):r(t,o)}}}.bind(this);e.subscribeEvent("StandardLoginFormWebclient::ConstructView::after",o),e.subscribeEvent("MailLoginFormWebclient::ConstructView::after",o)}}}},YI4A:function(t,o,i){"use strict";var s=i("F/us"),e=i("0h2I"),n=i("SQrT"),r=i("RN+F"),a=i("czxF"),h=i("o0Bx"),c=i("IAk5");function p(){a.call(this),this.onConfirm=null,this.onCancel=null,this.pin=e.observable(""),this.inPropgress=e.observable(!1),this.pinFocused=e.observable(!1),this.isMobile=e.observable(c.isMobile()||!1),this.Login=null,this.Password=null}s.extendOwn(p.prototype,a.prototype),p.prototype.PopupTemplate="TwoFactorAuth_VerifyTokenPopup",p.prototype.onOpen=function(t,o,i,s){this.onConfirm=t,this.onCancel=o,this.Login=i,this.Password=s,this.pinFocused(!0)},p.prototype.verifyPin=function(){this.inPropgress(!0),h.send("TwoFactorAuth","VerifyPin",{Pin:this.pin(),Login:this.Login,Password:this.Password},this.onGetVerifyResponse,this)},p.prototype.onGetVerifyResponse=function(t){t.Result?(s.isFunction(this.onConfirm)&&this.onConfirm(t),this.closePopup(),this.pin("")):(n.showError(r.i18n("TWOFACTORAUTH/ERROR_WRONG_PIN")),this.pin("")),this.inPropgress(!1)},p.prototype.cancelPopup=function(){s.isFunction(this.onCancel)&&this.onCancel(!1),this.closePopup()},t.exports=new p}}]);